from multiprocessing.managers import DictProxy
from django.http import HttpResponse
from requests import Response
from rest_framework.views import APIView
from alert import serializers
from alert.serializers import AlertSerializer, UserSerializer
from .models import Alert,User
from rest_framework.permissions import IsAuthenticated
from rest_framework.authentication import SessionAuthentication, BasicAuthentication
from rest_framework.response import Response
from rest_framework.decorators import api_view
from django.contrib.auth import logout
from rest_framework_simplejwt.tokens import RefreshToken
from django.db.models import Q

# Create your views here.
import requests
import json
# https://api.coingecko.com/api/v3/coins/markets?vs_currency=USD&order=market_cap_desc&per_page=100&page=1&sparkline=false


#print(response_API.status_code)










sample_data=[
  {
    "id": "bitcoin",
    "symbol": "btc",
    "name": "Bitcoin",
    "image": "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1547033579",
    "current_price": 20876,
    "market_cap": 398549458348,
    "market_cap_rank": 1,
    "fully_diluted_valuation": 438672606525,
    "total_volume": 18052392042,
    "high_24h": 21481,
    "low_24h": 20568,
    "price_change_24h": -521.500167480528,
    "price_change_percentage_24h": -2.43716,
    "market_cap_change_24h": -9704257153.066895,
    "market_cap_change_percentage_24h": -2.37702,
    "circulating_supply": 19079237.0,
    "total_supply": 21000000.0,
    "max_supply": 21000000.0,
    "ath": 69045,
    "ath_change_percentage": -69.76397,
    "ath_date": "2021-11-10T14:24:11.849Z",
    "atl": 67.81,
    "atl_change_percentage": 30687.06386,
    "atl_date": "2013-07-06T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:19:31.936Z"
  },
  {
    "id": "ethereum",
    "symbol": "eth",
    "name": "Ethereum",
    "image": "https://assets.coingecko.com/coins/images/279/large/ethereum.png?1595348880",
    "current_price": 1207,
    "market_cap": 146466643765,
    "market_cap_rank": 2,
    "fully_diluted_valuation": None,
    "total_volume": 12520658448,
    "high_24h": 1235.07,
    "low_24h": 1170.84,
    "price_change_24h": -21.12465377074068,
    "price_change_percentage_24h": -1.71982,
    "market_cap_change_24h": -2680995694.2167053,
    "market_cap_change_percentage_24h": -1.79754,
    "circulating_supply": 121329552.999,
    "total_supply": None,
    "max_supply": None,
    "ath": 4878.26,
    "ath_change_percentage": -75.24887,
    "ath_date": "2021-11-10T14:24:19.604Z",
    "atl": 0.432979,
    "atl_change_percentage": 278764.52684,
    "atl_date": "2015-10-20T00:00:00.000Z",
    "roi": {
      "times": 76.24614441398386,
      "currency": "btc",
      "percentage": 7624.614441398387
    },
    "last_updated": "2022-06-28T08:20:34.821Z"
  },
  {
    "id": "tether",
    "symbol": "usdt",
    "name": "Tether",
    "image": "https://assets.coingecko.com/coins/images/325/large/Tether-logo.png?1598003707",
    "current_price": 0.999646,
    "market_cap": 66937815942,
    "market_cap_rank": 3,
    "fully_diluted_valuation": None,
    "total_volume": 47315399578,
    "high_24h": 1.005,
    "low_24h": 0.99916,
    "price_change_24h": -0.000985186149434436,
    "price_change_percentage_24h": -0.09846,
    "market_cap_change_24h": 33903582,
    "market_cap_change_percentage_24h": 0.05068,
    "circulating_supply": 66834919366.0751,
    "total_supply": 66834919366.0751,
    "max_supply": None,
    "ath": 1.32,
    "ath_change_percentage": -24.44639,
    "ath_date": "2018-07-24T00:00:00.000Z",
    "atl": 0.572521,
    "atl_change_percentage": 74.6043,
    "atl_date": "2015-03-02T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:15:54.748Z"
  },
  {
    "id": "usd-coin",
    "symbol": "usdc",
    "name": "USD Coin",
    "image": "https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",
    "current_price": 1.001,
    "market_cap": 55645129055,
    "market_cap_rank": 4,
    "fully_diluted_valuation": None,
    "total_volume": 4783498849,
    "high_24h": 1.009,
    "low_24h": 0.996909,
    "price_change_24h": -0.000417589838677346,
    "price_change_percentage_24h": -0.04171,
    "market_cap_change_24h": -347218535.03749084,
    "market_cap_change_percentage_24h": -0.62012,
    "circulating_supply": 1286.79,
    "total_supply": 1286.79,
    "max_supply": None,
    "ath": 1.17,
    "ath_change_percentage": -14.53114,
    "ath_date": "2019-05-08T00:40:28.300Z",
    "atl": 0.891848,
    "atl_change_percentage": 12.38446,
    "atl_date": "2021-05-19T13:14:05.611Z",
    "roi": None,
    "last_updated": "2022-06-28T08:19:58.919Z"
  },
  {
    "id": "binancecoin",
    "symbol": "bnb",
    "name": "BNB",
    "image": "https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png?1644979850",
    "current_price": 237.89,
    "market_cap": 38794445216,
    "market_cap_rank": 5,
    "fully_diluted_valuation": 39231576372,
    "total_volume": 858314238,
    "high_24h": 240.65,
    "low_24h": 230.92,
    "price_change_24h": -2.3176711843272244,
    "price_change_percentage_24h": -0.96485,
    "market_cap_change_24h": -394980789.80194855,
    "market_cap_change_percentage_24h": -1.00788,
    "circulating_supply": 163276974.63,
    "total_supply": 163276974.63,
    "max_supply": 165116760.0,
    "ath": 686.31,
    "ath_change_percentage": -65.3374,
    "ath_date": "2021-05-10T07:24:17.097Z",
    "atl": 0.0398177,
    "atl_change_percentage": 597352.16801,
    "atl_date": "2017-10-19T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:19:06.924Z"
  },
  {
    "id": "binance-usd",
    "symbol": "busd",
    "name": "Binance USD",
    "image": "https://assets.coingecko.com/coins/images/9576/large/BUSD.png?1568947766",
    "current_price": 1.001,
    "market_cap": 17425040977,
    "market_cap_rank": 6,
    "fully_diluted_valuation": None,
    "total_volume": 5291813574,
    "high_24h": 1.007,
    "low_24h": 0.991503,
    "price_change_24h": -0.001082449263645424,
    "price_change_percentage_24h": -0.10803,
    "market_cap_change_24h": -14426107.658714294,
    "market_cap_change_percentage_24h": -0.08272,
    "circulating_supply": 17408263232.3,
    "total_supply": 17408263232.3,
    "max_supply": None,
    "ath": 1.15,
    "ath_change_percentage": -13.26695,
    "ath_date": "2020-03-13T02:35:42.953Z",
    "atl": 0.901127,
    "atl_change_percentage": 11.09156,
    "atl_date": "2021-05-19T13:04:37.445Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:46.775Z"
  },
  {
    "id": "ripple",
    "symbol": "xrp",
    "name": "XRP",
    "image": "https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png?1605778731",
    "current_price": 0.350427,
    "market_cap": 16940711101,
    "market_cap_rank": 7,
    "fully_diluted_valuation": 35042665202,
    "total_volume": 948169597,
    "high_24h": 0.365642,
    "low_24h": 0.34205,
    "price_change_24h": -0.013745651382280623,
    "price_change_percentage_24h": -3.77449,
    "market_cap_change_24h": -664507415.7922745,
    "market_cap_change_percentage_24h": -3.77449,
    "circulating_supply": 48343101197.0,
    "total_supply": 99989535142.0,
    "max_supply": 100000000000.0,
    "ath": 3.4,
    "ath_change_percentage": -89.68863,
    "ath_date": "2018-01-07T00:00:00.000Z",
    "atl": 0.00268621,
    "atl_change_percentage": 12945.40924,
    "atl_date": "2014-05-22T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:19:28.948Z"
  },
  {
    "id": "cardano",
    "symbol": "ada",
    "name": "Cardano",
    "image": "https://assets.coingecko.com/coins/images/975/large/cardano.png?1547034860",
    "current_price": 0.488094,
    "market_cap": 16507454607,
    "market_cap_rank": 8,
    "fully_diluted_valuation": 21964213210,
    "total_volume": 693463237,
    "high_24h": 0.508446,
    "low_24h": 0.476657,
    "price_change_24h": -0.01675051661527205,
    "price_change_percentage_24h": -3.31796,
    "market_cap_change_24h": -584497423.1331081,
    "market_cap_change_percentage_24h": -3.41972,
    "circulating_supply": 33820262543.95,
    "total_supply": 45000000000.0,
    "max_supply": 45000000000.0,
    "ath": 3.09,
    "ath_change_percentage": -84.18493,
    "ath_date": "2021-09-02T06:00:10.474Z",
    "atl": 0.01925275,
    "atl_change_percentage": 2435.72708,
    "atl_date": "2020-03-13T02:22:55.044Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:29.723Z"
  },
  {
    "id": "solana",
    "symbol": "sol",
    "name": "Solana",
    "image": "https://assets.coingecko.com/coins/images/4128/large/solana.png?1640133422",
    "current_price": 38.66,
    "market_cap": 13238111773,
    "market_cap_rank": 9,
    "fully_diluted_valuation": None,
    "total_volume": 1151374613,
    "high_24h": 41.13,
    "low_24h": 37.18,
    "price_change_24h": -2.300747675279922,
    "price_change_percentage_24h": -5.61673,
    "market_cap_change_24h": -769247541.3914948,
    "market_cap_change_percentage_24h": -5.49174,
    "circulating_supply": 342769218.27472,
    "total_supply": 508180963.57,
    "max_supply": None,
    "ath": 259.96,
    "ath_change_percentage": -85.16017,
    "ath_date": "2021-11-06T21:54:35.825Z",
    "atl": 0.500801,
    "atl_change_percentage": 7603.15972,
    "atl_date": "2020-05-11T19:35:23.449Z",
    "roi": None,
    "last_updated": "2022-06-28T08:19:50.452Z"
  },
  {
    "id": "dogecoin",
    "symbol": "doge",
    "name": "Dogecoin",
    "image": "https://assets.coingecko.com/coins/images/5/large/dogecoin.png?1547792256",
    "current_price": 0.071638,
    "market_cap": 9504280374,
    "market_cap_rank": 10,
    "fully_diluted_valuation": None,
    "total_volume": 650255471,
    "high_24h": 0.078543,
    "low_24h": 0.069208,
    "price_change_24h": -0.005302497565993589,
    "price_change_percentage_24h": -6.89168,
    "market_cap_change_24h": -699147081.4463158,
    "market_cap_change_percentage_24h": -6.85208,
    "circulating_supply": 132670764299.894,
    "total_supply": None,
    "max_supply": None,
    "ath": 0.731578,
    "ath_change_percentage": -90.20773,
    "ath_date": "2021-05-08T05:08:23.458Z",
    "atl": 8.69e-5,
    "atl_change_percentage": 82333.82555,
    "atl_date": "2015-05-06T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:02.896Z"
  },
  {
    "id": "polkadot",
    "symbol": "dot",
    "name": "Polkadot",
    "image": "https://assets.coingecko.com/coins/images/12171/large/polkadot.png?1639712644",
    "current_price": 7.72,
    "market_cap": 8697525630,
    "market_cap_rank": 11,
    "fully_diluted_valuation": None,
    "total_volume": 265580243,
    "high_24h": 8.2,
    "low_24h": 7.5,
    "price_change_24h": -0.417594468888959,
    "price_change_percentage_24h": -5.12961,
    "market_cap_change_24h": -460609160.9721737,
    "market_cap_change_percentage_24h": -5.02951,
    "circulating_supply": 1126146537.19515,
    "total_supply": 1207095671.90765,
    "max_supply": None,
    "ath": 54.98,
    "ath_change_percentage": -85.9607,
    "ath_date": "2021-11-04T14:10:09.301Z",
    "atl": 2.7,
    "atl_change_percentage": 186.15612,
    "atl_date": "2020-08-20T05:48:11.359Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:13.412Z"
  },
  {
    "id": "shiba-inu",
    "symbol": "shib",
    "name": "Shiba Inu",
    "image": "https://assets.coingecko.com/coins/images/11939/large/shiba.png?1622619446",
    "current_price": 1.09e-5,
    "market_cap": 6423615955,
    "market_cap_rank": 12,
    "fully_diluted_valuation": None,
    "total_volume": 514248163,
    "high_24h": 1.166e-5,
    "low_24h": 1.067e-5,
    "price_change_24h": -7.38742200745e-7,
    "price_change_percentage_24h": -6.34795,
    "market_cap_change_24h": -447829207.0199213,
    "market_cap_change_percentage_24h": -6.51725,
    "circulating_supply": 589389775037599.6,
    "total_supply": 999991465593436.0,
    "max_supply": None,
    "ath": 8.616e-5,
    "ath_change_percentage": -87.35618,
    "ath_date": "2021-10-28T03:54:55.568Z",
    "atl": 5.6366e-11,
    "atl_change_percentage": 19326600.64429,
    "atl_date": "2020-11-28T11:26:25.838Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:28.026Z"
  },
  {
    "id": "dai",
    "symbol": "dai",
    "name": "Dai",
    "image": "https://assets.coingecko.com/coins/images/9956/large/4943.png?1636636734",
    "current_price": 1.001,
    "market_cap": 6312194967,
    "market_cap_rank": 13,
    "fully_diluted_valuation": 6312194967,
    "total_volume": 267517699,
    "high_24h": 1.005,
    "low_24h": 0.998688,
    "price_change_24h": -0.00015495790860709,
    "price_change_percentage_24h": -0.01548,
    "market_cap_change_24h": -1567640.4209403992,
    "market_cap_change_percentage_24h": -0.02483,
    "circulating_supply": 6305853770.35563,
    "total_supply": 6305853770.35563,
    "max_supply": 6305853770.35563,
    "ath": 1.22,
    "ath_change_percentage": -17.84695,
    "ath_date": "2020-03-13T03:02:50.373Z",
    "atl": 0.903243,
    "atl_change_percentage": 10.8659,
    "atl_date": "2019-11-25T00:04:18.137Z",
    "roi": None,
    "last_updated": "2022-06-28T08:15:29.504Z"
  },
  {
    "id": "tron",
    "symbol": "trx",
    "name": "TRON",
    "image": "https://assets.coingecko.com/coins/images/1094/large/tron-logo.png?1547035066",
    "current_price": 0.066788,
    "market_cap": 6191022358,
    "market_cap_rank": 14,
    "fully_diluted_valuation": None,
    "total_volume": 771420972,
    "high_24h": 0.070029,
    "low_24h": 0.065335,
    "price_change_24h": -0.001905577991304822,
    "price_change_percentage_24h": -2.77402,
    "market_cap_change_24h": -157808636.2709446,
    "market_cap_change_percentage_24h": -2.48563,
    "circulating_supply": 92496681910.2407,
    "total_supply": 101900409184.273,
    "max_supply": None,
    "ath": 0.231673,
    "ath_change_percentage": -71.15951,
    "ath_date": "2018-01-05T00:00:00.000Z",
    "atl": 0.00180434,
    "atl_change_percentage": 3603.04353,
    "atl_date": "2017-11-12T00:00:00.000Z",
    "roi": {
      "times": 34.15165988867545,
      "currency": "usd",
      "percentage": 3415.165988867545
    },
    "last_updated": "2022-06-28T08:20:41.934Z"
  },
  {
    "id": "avalanche-2",
    "symbol": "avax",
    "name": "Avalanche",
    "image": "https://assets.coingecko.com/coins/images/12559/large/coin-round-red.png?1604021818",
    "current_price": 19.61,
    "market_cap": 5530937057,
    "market_cap_rank": 15,
    "fully_diluted_valuation": 14117570504,
    "total_volume": 427763722,
    "high_24h": 21.3,
    "low_24h": 18.82,
    "price_change_24h": -1.429594078192423,
    "price_change_percentage_24h": -6.79551,
    "market_cap_change_24h": -399812198.06804085,
    "market_cap_change_percentage_24h": -6.74134,
    "circulating_supply": 282079319.534883,
    "total_supply": 406171869.688422,
    "max_supply": 720000000.0,
    "ath": 144.96,
    "ath_change_percentage": -86.46697,
    "ath_date": "2021-11-21T14:18:56.538Z",
    "atl": 2.8,
    "atl_change_percentage": 600.36421,
    "atl_date": "2020-12-31T13:15:21.540Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:43.967Z"
  },
  {
    "id": "wrapped-bitcoin",
    "symbol": "wbtc",
    "name": "Wrapped Bitcoin",
    "image": "https://assets.coingecko.com/coins/images/7598/large/wrapped_bitcoin_wbtc.png?1548822744",
    "current_price": 20880,
    "market_cap": 5530305476,
    "market_cap_rank": 16,
    "fully_diluted_valuation": 5530305476,
    "total_volume": 222766789,
    "high_24h": 21492,
    "low_24h": 20584,
    "price_change_24h": -502.12316377719253,
    "price_change_percentage_24h": -2.34829,
    "market_cap_change_24h": -134630239.29952526,
    "market_cap_change_percentage_24h": -2.37655,
    "circulating_supply": 264478.83001222,
    "total_supply": 264478.83001222,
    "max_supply": 264478.83001222,
    "ath": 70643,
    "ath_change_percentage": -70.42161,
    "ath_date": "2021-11-10T14:40:19.650Z",
    "atl": 3139.17,
    "atl_change_percentage": 565.62681,
    "atl_date": "2019-04-02T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:06.431Z"
  },
  {
    "id": "leo-token",
    "symbol": "leo",
    "name": "LEO Token",
    "image": "https://assets.coingecko.com/coins/images/8418/large/leo-token.png?1558326215",
    "current_price": 5.79,
    "market_cap": 5427984937,
    "market_cap_rank": 17,
    "fully_diluted_valuation": None,
    "total_volume": 2688611,
    "high_24h": 5.99,
    "low_24h": 5.72,
    "price_change_24h": -0.08833182554188568,
    "price_change_percentage_24h": -1.50152,
    "market_cap_change_24h": -67057907.6297102,
    "market_cap_change_percentage_24h": -1.22033,
    "circulating_supply": 935205158.9,
    "total_supply": 985239504.0,
    "max_supply": None,
    "ath": 8.14,
    "ath_change_percentage": -28.56474,
    "ath_date": "2022-02-08T17:40:10.285Z",
    "atl": 0.799859,
    "atl_change_percentage": 626.5659,
    "atl_date": "2019-12-24T15:14:35.376Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:50.384Z"
  },
  {
    "id": "staked-ether",
    "symbol": "steth",
    "name": "Lido Staked Ether",
    "image": "https://assets.coingecko.com/coins/images/13442/large/steth_logo.png?1608607546",
    "current_price": 1163.16,
    "market_cap": 4931096376,
    "market_cap_rank": 18,
    "fully_diluted_valuation": 4931096376,
    "total_volume": 43271845,
    "high_24h": 1195.6,
    "low_24h": 1131.98,
    "price_change_24h": -26.047204878376988,
    "price_change_percentage_24h": -2.1903,
    "market_cap_change_24h": -112240003.81908894,
    "market_cap_change_percentage_24h": -2.22551,
    "circulating_supply": 4232712.70306664,
    "total_supply": 4232712.70306664,
    "max_supply": 4232712.70306664,
    "ath": 4829.57,
    "ath_change_percentage": -75.91408,
    "ath_date": "2021-11-10T14:40:47.256Z",
    "atl": 482.9,
    "atl_change_percentage": 140.88959,
    "atl_date": "2020-12-22T04:08:21.854Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:37.957Z"
  },
  {
    "id": "matic-network",
    "symbol": "matic",
    "name": "Polygon",
    "image": "https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png?1624446912",
    "current_price": 0.534816,
    "market_cap": 4282169821,
    "market_cap_rank": 19,
    "fully_diluted_valuation": 5348163762,
    "total_volume": 612599304,
    "high_24h": 0.594895,
    "low_24h": 0.511704,
    "price_change_24h": -0.05050075683131905,
    "price_change_percentage_24h": -8.62793,
    "market_cap_change_24h": -403336575.826426,
    "market_cap_change_percentage_24h": -8.60817,
    "circulating_supply": 8006803852.62,
    "total_supply": 10000000000.0,
    "max_supply": 10000000000.0,
    "ath": 2.92,
    "ath_change_percentage": -81.64699,
    "ath_date": "2021-12-27T02:08:34.307Z",
    "atl": 0.00314376,
    "atl_change_percentage": 16924.89857,
    "atl_date": "2019-05-10T00:00:00.000Z",
    "roi": {
      "times": 202.35223429577874,
      "currency": "usd",
      "percentage": 20235.223429577876
    },
    "last_updated": "2022-06-28T08:20:04.847Z"
  },
  {
    "id": "litecoin",
    "symbol": "ltc",
    "name": "Litecoin",
    "image": "https://assets.coingecko.com/coins/images/2/large/litecoin.png?1547033580",
    "current_price": 55.65,
    "market_cap": 3935386089,
    "market_cap_rank": 20,
    "fully_diluted_valuation": 4682290377,
    "total_volume": 384389400,
    "high_24h": 58.46,
    "low_24h": 54.15,
    "price_change_24h": -2.8114435874971093,
    "price_change_percentage_24h": -4.80915,
    "market_cap_change_24h": -196675962.29010916,
    "market_cap_change_percentage_24h": -4.75975,
    "circulating_supply": 70600583.2334713,
    "total_supply": 84000000.0,
    "max_supply": 84000000.0,
    "ath": 410.26,
    "ath_change_percentage": -86.42971,
    "ath_date": "2021-05-10T03:13:07.904Z",
    "atl": 1.15,
    "atl_change_percentage": 4746.04626,
    "atl_date": "2015-01-14T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:48.021Z"
  },
  {
    "id": "ftx-token",
    "symbol": "ftt",
    "name": "FTX",
    "image": "https://assets.coingecko.com/coins/images/9026/large/F.png?1609051564",
    "current_price": 27.42,
    "market_cap": 3712134547,
    "market_cap_rank": 21,
    "fully_diluted_valuation": 9084141325,
    "total_volume": 70804229,
    "high_24h": 28.05,
    "low_24h": 26.77,
    "price_change_24h": -0.3481531209039659,
    "price_change_percentage_24h": -1.2537,
    "market_cap_change_24h": -49546720.781767845,
    "market_cap_change_percentage_24h": -1.31714,
    "circulating_supply": 135348550.21874425,
    "total_supply": 331217886.285972,
    "max_supply": 331217886.285972,
    "ath": 84.18,
    "ath_change_percentage": -67.437,
    "ath_date": "2021-09-09T16:59:43.151Z",
    "atl": 1.15,
    "atl_change_percentage": 2284.2658,
    "atl_date": "2019-09-06T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:37.976Z"
  },
  {
    "id": "okb",
    "symbol": "okb",
    "name": "OKB",
    "image": "https://assets.coingecko.com/coins/images/4463/large/WeChat_Image_20220118095654.png?1642471050",
    "current_price": 12.38,
    "market_cap": 3175253465,
    "market_cap_rank": 22,
    "fully_diluted_valuation": None,
    "total_volume": 4612901,
    "high_24h": 12.8,
    "low_24h": 12.15,
    "price_change_24h": -0.3670247322349738,
    "price_change_percentage_24h": -2.88014,
    "market_cap_change_24h": -89286093.35317993,
    "market_cap_change_percentage_24h": -2.73503,
    "circulating_supply": 256388091.38,
    "total_supply": 300000000.0,
    "max_supply": None,
    "ath": 44.01,
    "ath_change_percentage": -71.82386,
    "ath_date": "2021-05-03T01:03:16.108Z",
    "atl": 0.580608,
    "atl_change_percentage": 2035.51895,
    "atl_date": "2019-01-14T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:46.729Z"
  },
  {
    "id": "crypto-com-chain",
    "symbol": "cro",
    "name": "Cronos",
    "image": "https://assets.coingecko.com/coins/images/7310/large/oCw2s3GI_400x400.jpeg?1645172042",
    "current_price": 0.1247,
    "market_cap": 3150288841,
    "market_cap_rank": 23,
    "fully_diluted_valuation": None,
    "total_volume": 19512577,
    "high_24h": 0.12851,
    "low_24h": 0.122102,
    "price_change_24h": -0.003004777566308778,
    "price_change_percentage_24h": -2.35292,
    "market_cap_change_24h": -77820523.40256405,
    "market_cap_change_percentage_24h": -2.41072,
    "circulating_supply": 25263013692.0,
    "total_supply": 30263013692.0,
    "max_supply": None,
    "ath": 0.965407,
    "ath_change_percentage": -87.08904,
    "ath_date": "2021-11-24T15:53:54.855Z",
    "atl": 0.0121196,
    "atl_change_percentage": 928.44446,
    "atl_date": "2019-02-08T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:29.378Z"
  },
  {
    "id": "chainlink",
    "symbol": "link",
    "name": "Chainlink",
    "image": "https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png?1547034700",
    "current_price": 6.58,
    "market_cap": 3072735135,
    "market_cap_rank": 24,
    "fully_diluted_valuation": 6578324403,
    "total_volume": 535202746,
    "high_24h": 6.98,
    "low_24h": 6.35,
    "price_change_24h": -0.35449298832671605,
    "price_change_percentage_24h": -5.1116,
    "market_cap_change_24h": -169659634.5191717,
    "market_cap_change_percentage_24h": -5.23254,
    "circulating_supply": 467099970.5305637,
    "total_supply": 1000000000.0,
    "max_supply": 1000000000.0,
    "ath": 52.7,
    "ath_change_percentage": -87.51656,
    "ath_date": "2021-05-10T00:13:57.214Z",
    "atl": 0.148183,
    "atl_change_percentage": 4339.33646,
    "atl_date": "2017-11-29T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:46.213Z"
  },
  {
    "id": "stellar",
    "symbol": "xlm",
    "name": "Stellar",
    "image": "https://assets.coingecko.com/coins/images/100/large/Stellar_symbol_black_RGB.png?1552356157",
    "current_price": 0.118819,
    "market_cap": 2965740642,
    "market_cap_rank": 25,
    "fully_diluted_valuation": 5926696658,
    "total_volume": 132611616,
    "high_24h": 0.124165,
    "low_24h": 0.11506,
    "price_change_24h": -0.004399014371745183,
    "price_change_percentage_24h": -3.5701,
    "market_cap_change_24h": -118564945.18653059,
    "market_cap_change_percentage_24h": -3.84414,
    "circulating_supply": 25021077098.5324,
    "total_supply": 50001787717.979,
    "max_supply": 50001787717.979,
    "ath": 0.875563,
    "ath_change_percentage": -86.43449,
    "ath_date": "2018-01-03T00:00:00.000Z",
    "atl": 0.00047612,
    "atl_change_percentage": 24846.1735,
    "atl_date": "2015-03-05T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:18.074Z"
  },
  {
    "id": "near",
    "symbol": "near",
    "name": "NEAR Protocol",
    "image": "https://assets.coingecko.com/coins/images/10365/large/near_icon.png?1601359077",
    "current_price": 3.66,
    "market_cap": 2646287248,
    "market_cap_rank": 26,
    "fully_diluted_valuation": 3662392394,
    "total_volume": 219522633,
    "high_24h": 3.99,
    "low_24h": 3.55,
    "price_change_24h": -0.3201215544294418,
    "price_change_percentage_24h": -8.04058,
    "market_cap_change_24h": -229149031.75155544,
    "market_cap_change_percentage_24h": -7.96919,
    "circulating_supply": 722556996.426044,
    "total_supply": 1000000000.0,
    "max_supply": 1000000000.0,
    "ath": 20.44,
    "ath_change_percentage": -82.06703,
    "ath_date": "2022-01-16T22:09:45.873Z",
    "atl": 0.526762,
    "atl_change_percentage": 595.79017,
    "atl_date": "2020-11-04T16:09:15.137Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:48.075Z"
  },
  {
    "id": "uniswap",
    "symbol": "uni",
    "name": "Uniswap",
    "image": "https://assets.coingecko.com/coins/images/12504/large/uniswap-uni.png?1600306604",
    "current_price": 5.31,
    "market_cap": 2430245159,
    "market_cap_rank": 27,
    "fully_diluted_valuation": 5323769145,
    "total_volume": 116355880,
    "high_24h": 5.92,
    "low_24h": 5.16,
    "price_change_24h": -0.5290738906553916,
    "price_change_percentage_24h": -9.06562,
    "market_cap_change_24h": -221314470.43876886,
    "market_cap_change_percentage_24h": -8.34658,
    "circulating_supply": 456489583.4010546,
    "total_supply": 1000000000.0,
    "max_supply": 1000000000.0,
    "ath": 44.92,
    "ath_change_percentage": -88.18673,
    "ath_date": "2021-05-03T05:25:04.822Z",
    "atl": 1.03,
    "atl_change_percentage": 415.08864,
    "atl_date": "2020-09-17T01:20:38.214Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:50.346Z"
  },
  {
    "id": "cosmos",
    "symbol": "atom",
    "name": "Cosmos Hub",
    "image": "https://assets.coingecko.com/coins/images/1481/large/cosmos_hub.png?1555657960",
    "current_price": 7.84,
    "market_cap": 2296084202,
    "market_cap_rank": 28,
    "fully_diluted_valuation": None,
    "total_volume": 272692029,
    "high_24h": 8.58,
    "low_24h": 7.52,
    "price_change_24h": -0.6149136167006786,
    "price_change_percentage_24h": -7.27683,
    "market_cap_change_24h": -172240274.18803453,
    "market_cap_change_percentage_24h": -6.97802,
    "circulating_supply": 292586163.827428,
    "total_supply": None,
    "max_supply": None,
    "ath": 44.45,
    "ath_change_percentage": -82.36588,
    "ath_date": "2022-01-17T00:34:41.497Z",
    "atl": 1.16,
    "atl_change_percentage": 575.65684,
    "atl_date": "2020-03-13T02:27:44.591Z",
    "roi": {
      "times": 77.35382896821822,
      "currency": "usd",
      "percentage": 7735.382896821822
    },
    "last_updated": "2022-06-28T08:20:37.107Z"
  },
  {
    "id": "algorand",
    "symbol": "algo",
    "name": "Algorand",
    "image": "https://assets.coingecko.com/coins/images/4380/large/download.png?1547039725",
    "current_price": 0.330287,
    "market_cap": 2278727661,
    "market_cap_rank": 29,
    "fully_diluted_valuation": 3302872690,
    "total_volume": 79001258,
    "high_24h": 0.345654,
    "low_24h": 0.320381,
    "price_change_24h": -0.014239614321907791,
    "price_change_percentage_24h": -4.13309,
    "market_cap_change_24h": -102682782.36550808,
    "market_cap_change_percentage_24h": -4.31185,
    "circulating_supply": 6899229474.24158,
    "total_supply": 7293068449.9795,
    "max_supply": 10000000000.0,
    "ath": 3.56,
    "ath_change_percentage": -90.75009,
    "ath_date": "2019-06-20T14:51:19.480Z",
    "atl": 0.105336,
    "atl_change_percentage": 212.71842,
    "atl_date": "2020-03-13T02:20:48.438Z",
    "roi": {
      "times": -0.8623803045736774,
      "currency": "usd",
      "percentage": -86.23803045736774
    },
    "last_updated": "2022-06-28T08:20:37.740Z"
  },
  {
    "id": "ethereum-classic",
    "symbol": "etc",
    "name": "Ethereum Classic",
    "image": "https://assets.coingecko.com/coins/images/453/large/ethereum-classic-logo.png?1547034169",
    "current_price": 16.4,
    "market_cap": 2226092445,
    "market_cap_rank": 30,
    "fully_diluted_valuation": 3461379112,
    "total_volume": 194258128,
    "high_24h": 17.5,
    "low_24h": 15.93,
    "price_change_24h": -0.8627447251227025,
    "price_change_percentage_24h": -4.9982,
    "market_cap_change_24h": -119128409.38018513,
    "market_cap_change_percentage_24h": -5.07962,
    "circulating_supply": 135506011.630234,
    "total_supply": 210700000.0,
    "max_supply": 210700000.0,
    "ath": 167.09,
    "ath_change_percentage": -90.18246,
    "ath_date": "2021-05-06T18:34:22.133Z",
    "atl": 0.615038,
    "atl_change_percentage": 2567.09972,
    "atl_date": "2016-07-25T00:00:00.000Z",
    "roi": {
      "times": 35.44083693395,
      "currency": "usd",
      "percentage": 3544.083693395
    },
    "last_updated": "2022-06-28T08:20:18.773Z"
  },
  {
    "id": "monero",
    "symbol": "xmr",
    "name": "Monero",
    "image": "https://assets.coingecko.com/coins/images/69/large/monero_logo.png?1547033729",
    "current_price": 120.3,
    "market_cap": 2186580259,
    "market_cap_rank": 31,
    "fully_diluted_valuation": None,
    "total_volume": 81433150,
    "high_24h": 130.12,
    "low_24h": 116.91,
    "price_change_24h": -7.589231783273391,
    "price_change_percentage_24h": -5.93415,
    "market_cap_change_24h": -130649976.29200602,
    "market_cap_change_percentage_24h": -5.6382,
    "circulating_supply": 18140510.5791402,
    "total_supply": None,
    "max_supply": None,
    "ath": 542.33,
    "ath_change_percentage": -77.81709,
    "ath_date": "2018-01-09T00:00:00.000Z",
    "atl": 0.216177,
    "atl_change_percentage": 55550.58681,
    "atl_date": "2015-01-14T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:45.300Z"
  },
  {
    "id": "bitcoin-cash",
    "symbol": "bch",
    "name": "Bitcoin Cash",
    "image": "https://assets.coingecko.com/coins/images/780/large/bitcoin-cash-circle.png?1594689492",
    "current_price": 111.4,
    "market_cap": 2129016012,
    "market_cap_rank": 32,
    "fully_diluted_valuation": 2340483592,
    "total_volume": 587083277,
    "high_24h": 116.74,
    "low_24h": 108.18,
    "price_change_24h": -4.9173968422372525,
    "price_change_percentage_24h": -4.22771,
    "market_cap_change_24h": -92013743.4534719,
    "market_cap_change_percentage_24h": -4.14284,
    "circulating_supply": 19102606.1466511,
    "total_supply": 21000000.0,
    "max_supply": 21000000.0,
    "ath": 3785.82,
    "ath_change_percentage": -97.0572,
    "ath_date": "2017-12-20T00:00:00.000Z",
    "atl": 76.93,
    "atl_change_percentage": 44.80966,
    "atl_date": "2018-12-16T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:38.339Z"
  },
  {
    "id": "theta-fuel",
    "symbol": "tfuel",
    "name": "Theta Fuel",
    "image": "https://assets.coingecko.com/coins/images/8029/large/1_0YusgngOrriVg4ZYx4wOFQ.png?1553483622",
    "current_price": 0.052933,
    "market_cap": 1886178774,
    "market_cap_rank": 33,
    "fully_diluted_valuation": None,
    "total_volume": 10911165,
    "high_24h": 0.054706,
    "low_24h": 0.051963,
    "price_change_24h": -0.000795932107524246,
    "price_change_percentage_24h": -1.48138,
    "market_cap_change_24h": 49552231,
    "market_cap_change_percentage_24h": 2.698,
    "circulating_supply": 0.0,
    "total_supply": 5301200000.0,
    "max_supply": None,
    "ath": 0.68159,
    "ath_change_percentage": -92.22766,
    "ath_date": "2021-06-09T06:50:55.818Z",
    "atl": 0.00090804,
    "atl_change_percentage": 5734.05352,
    "atl_date": "2020-03-13T02:30:37.972Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:13.867Z"
  },
  {
    "id": "chain-2",
    "symbol": "xcn",
    "name": "Chain",
    "image": "https://assets.coingecko.com/coins/images/24210/large/Chain_icon_200x200.png?1646895054",
    "current_price": 0.087766,
    "market_cap": 1883092356,
    "market_cap_rank": 34,
    "fully_diluted_valuation": 4688343824,
    "total_volume": 28084344,
    "high_24h": 0.092005,
    "low_24h": 0.085087,
    "price_change_24h": 0.00240555,
    "price_change_percentage_24h": 2.81809,
    "market_cap_change_24h": 48440636,
    "market_cap_change_percentage_24h": 2.64032,
    "circulating_supply": 21476653250.626488,
    "total_supply": 53470523779.0,
    "max_supply": 53470523779.0,
    "ath": 0.184139,
    "ath_change_percentage": -52.28229,
    "ath_date": "2022-05-27T11:45:24.820Z",
    "atl": 0.00287158,
    "atl_change_percentage": 2959.88311,
    "atl_date": "2022-06-14T06:35:07.084Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:18.645Z"
  },
  {
    "id": "flow",
    "symbol": "flow",
    "name": "Flow",
    "image": "https://assets.coingecko.com/coins/images/13446/large/5f6294c0c7a8cda55cb1c936_Flow_Wordmark.png?1631696776",
    "current_price": 1.78,
    "market_cap": 1845150095,
    "market_cap_rank": 35,
    "fully_diluted_valuation": None,
    "total_volume": 62729826,
    "high_24h": 1.8,
    "low_24h": 1.66,
    "price_change_24h": 0.04171947,
    "price_change_percentage_24h": 2.39905,
    "market_cap_change_24h": 43190084,
    "market_cap_change_percentage_24h": 2.39684,
    "circulating_supply": 1036200000.0,
    "total_supply": 1373338337.59667,
    "max_supply": None,
    "ath": 42.4,
    "ath_change_percentage": -95.77801,
    "ath_date": "2021-04-05T13:49:10.098Z",
    "atl": 1.24,
    "atl_change_percentage": 44.89255,
    "atl_date": "2022-06-18T20:11:35.436Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:21.750Z"
  },
  {
    "id": "vechain",
    "symbol": "vet",
    "name": "VeChain",
    "image": "https://assets.coingecko.com/coins/images/1167/large/VeChain-Logo-768x725.png?1547035194",
    "current_price": 0.02481978,
    "market_cap": 1801875800,
    "market_cap_rank": 36,
    "fully_diluted_valuation": 2154777649,
    "total_volume": 130513205,
    "high_24h": 0.02547637,
    "low_24h": 0.02394847,
    "price_change_24h": -0.000417987648287085,
    "price_change_percentage_24h": -1.6562,
    "market_cap_change_24h": -32084014.754444838,
    "market_cap_change_percentage_24h": -1.74944,
    "circulating_supply": 72511146418.0,
    "total_supply": 85985041177.0,
    "max_supply": 86712634466.0,
    "ath": 0.280991,
    "ath_change_percentage": -91.16704,
    "ath_date": "2021-04-19T01:08:21.675Z",
    "atl": 0.00191713,
    "atl_change_percentage": 1194.63312,
    "atl_date": "2020-03-13T02:29:59.652Z",
    "roi": {
      "times": 6.194890932417564,
      "currency": "eth",
      "percentage": 619.4890932417563
    },
    "last_updated": "2022-06-28T08:20:48.552Z"
  },
  {
    "id": "apecoin",
    "symbol": "ape",
    "name": "ApeCoin",
    "image": "https://assets.coingecko.com/coins/images/24383/large/apecoin.jpg?1647476455",
    "current_price": 5.2,
    "market_cap": 1543463708,
    "market_cap_rank": 37,
    "fully_diluted_valuation": 5152930481,
    "total_volume": 415318673,
    "high_24h": 5.23,
    "low_24h": 4.69,
    "price_change_24h": 0.283735,
    "price_change_percentage_24h": 5.77347,
    "market_cap_change_24h": 69801160,
    "market_cap_change_percentage_24h": 4.73658,
    "circulating_supply": 299531250.0,
    "total_supply": 1000000000.0,
    "max_supply": 1000000000.0,
    "ath": 26.7,
    "ath_change_percentage": -80.65296,
    "ath_date": "2022-04-28T21:44:21.164Z",
    "atl": 3.1,
    "atl_change_percentage": 66.62418,
    "atl_date": "2022-06-15T09:20:22.479Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:41.709Z"
  },
  {
    "id": "hedera-hashgraph",
    "symbol": "hbar",
    "name": "Hedera",
    "image": "https://assets.coingecko.com/coins/images/3688/large/hbar.png?1637045634",
    "current_price": 0.069475,
    "market_cap": 1479095660,
    "market_cap_rank": 38,
    "fully_diluted_valuation": None,
    "total_volume": 26538583,
    "high_24h": 0.072311,
    "low_24h": 0.067648,
    "price_change_24h": -0.002088596104684953,
    "price_change_percentage_24h": -2.91852,
    "market_cap_change_24h": -36730949.07919073,
    "market_cap_change_percentage_24h": -2.42316,
    "circulating_supply": 21252184396.8014,
    "total_supply": 50000000000.0,
    "max_supply": None,
    "ath": 0.569229,
    "ath_change_percentage": -87.77494,
    "ath_date": "2021-09-15T10:40:28.318Z",
    "atl": 0.00986111,
    "atl_change_percentage": 605.68675,
    "atl_date": "2020-01-02T17:30:24.852Z",
    "roi": None,
    "last_updated": "2022-06-28T08:19:55.009Z"
  },
  {
    "id": "the-sandbox",
    "symbol": "sand",
    "name": "The Sandbox",
    "image": "https://assets.coingecko.com/coins/images/12129/large/sandbox_logo.jpg?1597397942",
    "current_price": 1.17,
    "market_cap": 1473340279,
    "market_cap_rank": 39,
    "fully_diluted_valuation": 3511782333,
    "total_volume": 343091579,
    "high_24h": 1.26,
    "low_24h": 1.13,
    "price_change_24h": -0.06583336784191629,
    "price_change_percentage_24h": -5.32448,
    "market_cap_change_24h": -87119232.98122978,
    "market_cap_change_percentage_24h": -5.58292,
    "circulating_supply": 1258626081.2233226,
    "total_supply": 3000000000.0,
    "max_supply": 3000000000.0,
    "ath": 8.4,
    "ath_change_percentage": -86.07806,
    "ath_date": "2021-11-25T06:04:40.957Z",
    "atl": 0.02897764,
    "atl_change_percentage": 3934.13501,
    "atl_date": "2020-11-04T15:59:14.441Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:36.616Z"
  },
  {
    "id": "tezos",
    "symbol": "xtz",
    "name": "Tezos",
    "image": "https://assets.coingecko.com/coins/images/976/large/Tezos-logo.png?1547034862",
    "current_price": 1.65,
    "market_cap": 1472979645,
    "market_cap_rank": 40,
    "fully_diluted_valuation": None,
    "total_volume": 151947789,
    "high_24h": 1.67,
    "low_24h": 1.49,
    "price_change_24h": 0.135978,
    "price_change_percentage_24h": 8.96751,
    "market_cap_change_24h": 121318781,
    "market_cap_change_percentage_24h": 8.97553,
    "circulating_supply": 891903813.837985,
    "total_supply": None,
    "max_supply": None,
    "ath": 9.12,
    "ath_change_percentage": -81.87465,
    "ath_date": "2021-10-04T00:41:18.025Z",
    "atl": 0.350476,
    "atl_change_percentage": 371.44993,
    "atl_date": "2018-12-07T00:00:00.000Z",
    "roi": {
      "times": 2.5155719575805193,
      "currency": "usd",
      "percentage": 251.5571957580519
    },
    "last_updated": "2022-06-28T08:20:11.300Z"
  },
  {
    "id": "decentraland",
    "symbol": "mana",
    "name": "Decentraland",
    "image": "https://assets.coingecko.com/coins/images/878/large/decentraland-mana.png?1550108745",
    "current_price": 0.972739,
    "market_cap": 1460881467,
    "market_cap_rank": 41,
    "fully_diluted_valuation": 2133831925,
    "total_volume": 318662969,
    "high_24h": 1.005,
    "low_24h": 0.935972,
    "price_change_24h": -0.003094309851525035,
    "price_change_percentage_24h": -0.31709,
    "market_cap_change_24h": -4192708.970564127,
    "market_cap_change_percentage_24h": -0.28618,
    "circulating_supply": 1501822644.7339206,
    "total_supply": 2193632527.32015,
    "max_supply": 2193632527.32015,
    "ath": 5.85,
    "ath_change_percentage": -83.37432,
    "ath_date": "2021-11-25T10:04:18.534Z",
    "atl": 0.00923681,
    "atl_change_percentage": 10431.11651,
    "atl_date": "2017-10-31T00:00:00.000Z",
    "roi": {
      "times": 47.63695032371577,
      "currency": "usd",
      "percentage": 4763.695032371577
    },
    "last_updated": "2022-06-28T08:20:10.007Z"
  },
  {
    "id": "internet-computer",
    "symbol": "icp",
    "name": "Internet Computer",
    "image": "https://assets.coingecko.com/coins/images/14495/large/Internet_Computer_logo.png?1620703073",
    "current_price": 5.89,
    "market_cap": 1424076905,
    "market_cap_rank": 42,
    "fully_diluted_valuation": 2764024184,
    "total_volume": 61316608,
    "high_24h": 6.03,
    "low_24h": 5.59,
    "price_change_24h": -0.1084573268922604,
    "price_change_percentage_24h": -1.80786,
    "market_cap_change_24h": -26182684.003026247,
    "market_cap_change_percentage_24h": -1.80538,
    "circulating_supply": 241747670.622982,
    "total_supply": 483592865.708073,
    "max_supply": 469213710.0,
    "ath": 700.65,
    "ath_change_percentage": -99.16099,
    "ath_date": "2021-05-10T16:05:53.653Z",
    "atl": 4.71,
    "atl_change_percentage": 24.82454,
    "atl_date": "2022-06-18T20:14:50.529Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:31.620Z"
  },
  {
    "id": "frax",
    "symbol": "frax",
    "name": "Frax",
    "image": "https://assets.coingecko.com/coins/images/13422/large/frax_logo.png?1608476506",
    "current_price": 0.99852,
    "market_cap": 1364299154,
    "market_cap_rank": 43,
    "fully_diluted_valuation": 1364299154,
    "total_volume": 5221269,
    "high_24h": 1.008,
    "low_24h": 0.994756,
    "price_change_24h": -0.006901615588611243,
    "price_change_percentage_24h": -0.68644,
    "market_cap_change_24h": -40759385.99441576,
    "market_cap_change_percentage_24h": -2.9009,
    "circulating_supply": 1366914188.65833,
    "total_supply": 1366914188.65833,
    "max_supply": 1366914188.65833,
    "ath": 1.14,
    "ath_change_percentage": -12.38782,
    "ath_date": "2021-02-07T12:55:35.766Z",
    "atl": 0.891635,
    "atl_change_percentage": 12.06087,
    "atl_date": "2021-12-04T05:33:57.315Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:33.958Z"
  },
  {
    "id": "theta-token",
    "symbol": "theta",
    "name": "Theta Network",
    "image": "https://assets.coingecko.com/coins/images/2538/large/theta-token-logo.png?1548387191",
    "current_price": 1.35,
    "market_cap": 1352241896,
    "market_cap_rank": 44,
    "fully_diluted_valuation": None,
    "total_volume": 62564874,
    "high_24h": 1.41,
    "low_24h": 1.3,
    "price_change_24h": -0.054040350267499315,
    "price_change_percentage_24h": -3.85231,
    "market_cap_change_24h": -48265127.39853907,
    "market_cap_change_percentage_24h": -3.44626,
    "circulating_supply": 1000000000.0,
    "total_supply": 1000000000.0,
    "max_supply": None,
    "ath": 15.72,
    "ath_change_percentage": -91.41993,
    "ath_date": "2021-04-16T13:15:11.190Z",
    "atl": 0.04039979,
    "atl_change_percentage": 3238.53873,
    "atl_date": "2020-03-13T02:24:16.483Z",
    "roi": {
      "times": 7.9917519378126,
      "currency": "usd",
      "percentage": 799.17519378126
    },
    "last_updated": "2022-06-28T08:20:28.584Z"
  },
  {
    "id": "axie-infinity",
    "symbol": "axs",
    "name": "Axie Infinity",
    "image": "https://assets.coingecko.com/coins/images/13029/large/axie_infinity_logo.png?1604471082",
    "current_price": 16.06,
    "market_cap": 1325272056,
    "market_cap_rank": 45,
    "fully_diluted_valuation": 4350520916,
    "total_volume": 179810365,
    "high_24h": 16.92,
    "low_24h": 15.35,
    "price_change_24h": -0.6479371729803702,
    "price_change_percentage_24h": -3.87815,
    "market_cap_change_24h": -58538599.94042897,
    "market_cap_change_percentage_24h": -4.23025,
    "circulating_supply": 82248416.2218224,
    "total_supply": 270000000.0,
    "max_supply": 270000000.0,
    "ath": 164.9,
    "ath_change_percentage": -90.23449,
    "ath_date": "2021-11-06T19:29:29.482Z",
    "atl": 0.123718,
    "atl_change_percentage": 12915.9592,
    "atl_date": "2020-11-06T08:05:43.662Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:30.050Z"
  },
  {
    "id": "filecoin",
    "symbol": "fil",
    "name": "Filecoin",
    "image": "https://assets.coingecko.com/coins/images/12817/large/filecoin.png?1602753933",
    "current_price": 5.8,
    "market_cap": 1302437751,
    "market_cap_rank": 46,
    "fully_diluted_valuation": 11419947497,
    "total_volume": 106867649,
    "high_24h": 6.09,
    "low_24h": 5.61,
    "price_change_24h": -0.26362010199765695,
    "price_change_percentage_24h": -4.34798,
    "market_cap_change_24h": -57323093.124010324,
    "market_cap_change_percentage_24h": -4.21567,
    "circulating_supply": 224549340.0,
    "total_supply": 1968878490.0,
    "max_supply": 1968878490.0,
    "ath": 236.84,
    "ath_change_percentage": -97.54871,
    "ath_date": "2021-04-01T13:29:41.564Z",
    "atl": 4.83,
    "atl_change_percentage": 20.17948,
    "atl_date": "2022-06-18T20:54:43.983Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:26.889Z"
  },
  {
    "id": "elrond-erd-2",
    "symbol": "egld",
    "name": "Elrond",
    "image": "https://assets.coingecko.com/coins/images/12335/large/elrond3_360.png?1626341589",
    "current_price": 55.43,
    "market_cap": 1252751354,
    "market_cap_rank": 47,
    "fully_diluted_valuation": None,
    "total_volume": 39776747,
    "high_24h": 58.62,
    "low_24h": 54.05,
    "price_change_24h": -2.6754925307311908,
    "price_change_percentage_24h": -4.60446,
    "market_cap_change_24h": -53524145.081805944,
    "market_cap_change_percentage_24h": -4.09746,
    "circulating_supply": 22575107.0,
    "total_supply": 23905107.0,
    "max_supply": None,
    "ath": 545.64,
    "ath_change_percentage": -89.8373,
    "ath_date": "2021-11-23T10:33:26.737Z",
    "atl": 6.51,
    "atl_change_percentage": 752.23005,
    "atl_date": "2020-10-07T01:44:53.554Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:00.794Z"
  },
  {
    "id": "true-usd",
    "symbol": "tusd",
    "name": "TrueUSD",
    "image": "https://assets.coingecko.com/coins/images/3449/large/tusd.png?1618395665",
    "current_price": 1.001,
    "market_cap": 1200819728,
    "market_cap_rank": 48,
    "fully_diluted_valuation": None,
    "total_volume": 76669233,
    "high_24h": 1.006,
    "low_24h": 0.995384,
    "price_change_24h": 0.00025607,
    "price_change_percentage_24h": 0.0256,
    "market_cap_change_24h": 771996,
    "market_cap_change_percentage_24h": 0.06433,
    "circulating_supply": 1199055550.19283,
    "total_supply": 1199055550.19283,
    "max_supply": None,
    "ath": 1.62,
    "ath_change_percentage": -38.16536,
    "ath_date": "2018-08-26T20:41:09.375Z",
    "atl": 0.88355,
    "atl_change_percentage": 13.27053,
    "atl_date": "2020-03-12T10:47:51.380Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:44.008Z"
  },
  {
    "id": "helium",
    "symbol": "hnt",
    "name": "Helium",
    "image": "https://assets.coingecko.com/coins/images/4284/large/Helium_HNT.png?1612620071",
    "current_price": 10.89,
    "market_cap": 1144709333,
    "market_cap_rank": 49,
    "fully_diluted_valuation": 2427782027,
    "total_volume": 11038357,
    "high_24h": 11.16,
    "low_24h": 10.45,
    "price_change_24h": -0.217569649658369,
    "price_change_percentage_24h": -1.9593,
    "market_cap_change_24h": -22876454.021750927,
    "market_cap_change_percentage_24h": -1.9593,
    "circulating_supply": 105145428.407279,
    "total_supply": 223000000.0,
    "max_supply": 223000000.0,
    "ath": 54.88,
    "ath_change_percentage": -80.0767,
    "ath_date": "2021-11-12T23:08:25.301Z",
    "atl": 0.113248,
    "atl_change_percentage": 9554.34426,
    "atl_date": "2020-04-18T00:19:10.902Z",
    "roi": None,
    "last_updated": "2022-06-28T08:19:36.366Z"
  },
  {
    "id": "bitcoin-cash-sv",
    "symbol": "bsv",
    "name": "Bitcoin SV",
    "image": "https://assets.coingecko.com/coins/images/6799/large/BSV.png?1558947902",
    "current_price": 59.22,
    "market_cap": 1131323401,
    "market_cap_rank": 50,
    "fully_diluted_valuation": None,
    "total_volume": 39608012,
    "high_24h": 62.24,
    "low_24h": 57.96,
    "price_change_24h": -2.959615035825479,
    "price_change_percentage_24h": -4.75996,
    "market_cap_change_24h": -55301337.865701914,
    "market_cap_change_percentage_24h": -4.66039,
    "circulating_supply": 19084882.894239,
    "total_supply": 21000000.0,
    "max_supply": None,
    "ath": 489.75,
    "ath_change_percentage": -87.88495,
    "ath_date": "2021-04-16T17:09:04.630Z",
    "atl": 42.02,
    "atl_change_percentage": 41.21219,
    "atl_date": "2018-11-23T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:50.640Z"
  },
  {
    "id": "kucoin-shares",
    "symbol": "kcs",
    "name": "KuCoin",
    "image": "https://assets.coingecko.com/coins/images/1047/large/sa9z79.png?1610678720",
    "current_price": 10.61,
    "market_cap": 1038680976,
    "market_cap_rank": 51,
    "fully_diluted_valuation": None,
    "total_volume": 2250890,
    "high_24h": 10.96,
    "low_24h": 10.44,
    "price_change_24h": -0.31140179958974556,
    "price_change_percentage_24h": -2.85065,
    "market_cap_change_24h": -30347275.37004316,
    "market_cap_change_percentage_24h": -2.83877,
    "circulating_supply": 97898694.7425784,
    "total_supply": 145398694.742494,
    "max_supply": None,
    "ath": 28.83,
    "ath_change_percentage": -63.18936,
    "ath_date": "2021-12-01T15:09:35.541Z",
    "atl": 0.342863,
    "atl_change_percentage": 2995.24931,
    "atl_date": "2019-02-07T00:00:00.000Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:03.151Z"
  },
  {
    "id": "eos",
    "symbol": "eos",
    "name": "EOS",
    "image": "https://assets.coingecko.com/coins/images/738/large/eos-eos-logo.png?1547034481",
    "current_price": 0.984437,
    "market_cap": 986198135,
    "market_cap_rank": 52,
    "fully_diluted_valuation": None,
    "total_volume": 212869236,
    "high_24h": 1.028,
    "low_24h": 0.957362,
    "price_change_24h": -0.035193665465234725,
    "price_change_percentage_24h": -3.45161,
    "market_cap_change_24h": -32915151.037731886,
    "market_cap_change_percentage_24h": -3.22978,
    "circulating_supply": 999389287.3111,
    "total_supply": None,
    "max_supply": None,
    "ath": 22.71,
    "ath_change_percentage": -95.66543,
    "ath_date": "2018-04-29T07:50:33.540Z",
    "atl": 0.5024,
    "atl_change_percentage": 95.94665,
    "atl_date": "2017-10-23T00:00:00.000Z",
    "roi": {
      "times": -0.005619322323398788,
      "currency": "usd",
      "percentage": -0.5619322323398788
    },
    "last_updated": "2022-06-28T08:19:49.396Z"
  },
  {
    "id": "aave",
    "symbol": "aave",
    "name": "Aave",
    "image": "https://assets.coingecko.com/coins/images/12645/large/AAVE.png?1601374110",
    "current_price": 66.5,
    "market_cap": 924282733,
    "market_cap_rank": 53,
    "fully_diluted_valuation": 1063938652,
    "total_volume": 133702940,
    "high_24h": 68.07,
    "low_24h": 63.37,
    "price_change_24h": -1.2443026669075294,
    "price_change_percentage_24h": -1.83687,
    "market_cap_change_24h": -18929714.067563176,
    "market_cap_change_percentage_24h": -2.00694,
    "circulating_supply": 13899789.904523307,
    "total_supply": 16000000.0,
    "max_supply": 16000000.0,
    "ath": 661.69,
    "ath_change_percentage": -89.91712,
    "ath_date": "2021-05-18T21:19:59.514Z",
    "atl": 26.02,
    "atl_change_percentage": 156.37718,
    "atl_date": "2020-11-05T09:20:11.928Z",
    "roi": None,
    "last_updated": "2022-06-28T08:20:09.445Z"
  }]















@api_view(('GET','POST'))
def DeleteAPIView(request):
    print(request.user)
    # permission_classes=['IsAuthenticated']
    if request.method=="GET":
        return Response()
    else:
        pk=request.data
        alert=Alert.objects.get(id=pk)
        if alert is None: 
            return Response({"message":"Not Found object"})
        if alert.user!=request.user:
            print(request.user)
            return Response({"message":"You are not it owner so Cann't Be Deleted"})
        else:
            print(request.user)
            alert.delete()
        return Response({"Message":"Deleted"})



# class DeleteAPIView(APIView):
#     # permission_classes=['IsAuthenticated']
#     def get(self):
#         return Response()
#     def post(self,request):
#         pk=request.data
#         alert=Alert.objects.get(id=pk)
#         if alert is None: 
#             return Response({"message":"Not Found object"})
#         if alert.user!=request.user:
#             return Response({"message":"You are not it owner so Cann't Be Deleted"})
#         else:
#             alert.delete()
#             return Response({"Message":"Deleted"})



@api_view(('GET',))
def LogoutView(request):
    if request.method=="GET":
        print(request.user)
        logout(request)
        return  Response({'message':"Log out"})


# class LogoutView(APIView):
#     permission_classes=['IsAuthenticated']
#     def get(self,request):
#         logout(request)
#         return  Response({'message':"Log out"})



class Register(APIView):
    def post(self, request):
        username = request.data["username"]
        password = request.data["password"]
        email = request.data["email"]
        if username:
            print("get data")
        else:
            return Response("Try again")
        user = User.objects.create_user(username=username,password=password,email=email)
        srlzr=UserSerializer(user)
        refresh = RefreshToken.for_user(user)
        return Response({"user":srlzr.data,'refresh': str(refresh),'access': str(refresh.access_token),})
    def get(self, request):
        dict={
        "username":"",
        "password":"",
        "email":""
             }
        return Response(dict)







@api_view(('GET','POST'))
def trigerred(request):
    # response_API =requests.get('https://api.coingecko.com/api/v3/coins/markets?vs_currency=USD&order=market_cap_desc&per_page=100&page=1&sparkline=false')
    # data = sample_data.text
    # parse_json = json.loads(data)
    # dict={}
    dict=sample_data
    ansdict=[]
    userlist=[]
    for x in dict:
        cv=x['current_price']
        cc=x['symbol']
        alerts=Alert.objects.filter(alert_value=cv,status="created",coin=cc)
        srlzr=AlertSerializer(data=alerts,many=True)
        srlzr.is_valid()
        if len(srlzr.data)>0:
            ansdict.append(srlzr.data)
    for x in ansdict:
        for y in x:
            # print(y['user'])
            user=User.objects.get(id=y['user'])
            userlist.append(user.email)
    print(userlist)

    return Response(userlist)



@api_view(('GET','POST'))
def filter(request):
    print(request.user)
    if request.method=="POST":
        q=request.data['q']
        search_alerts=Alert.objects.filter(status=q,user=request.user)
        srlzr=AlertSerializer(data=search_alerts,many=True)
        srlzr.is_valid()
        return Response(srlzr.data)
    else:
        print(request.user)
        return Response({"q":""})





class AlertAPIView(APIView):
    permission_classes = [IsAuthenticated]
    def get(self, request, pk=None):
        print(request.user)
        if pk:
            alert=Alert.objects.get(id=pk)    
            if alert.user!=request.user:
                print("Diffrent User")
                return Response({"message":"No record Found"})
            else:
                print("Found")
                data={
                    'user':alert.user,
                    'id':alert.id,
                    'alert_value':alert.alert_value,
                    'status':alert.status
                }
                # print(alert.id)
                # print(alert.alert_value)
                # print(alert.status)
                serializer=AlertSerializer(alert) 
                return Response(serializer.data)
        else:
            alerts=Alert.objects.filter(user=request.user)
            srlzr=AlertSerializer(data=alerts,many=True)
            srlzr.is_valid()
            return Response(srlzr.data)


class CreateAlert(APIView):
    def get(self, request):
        return Response({"coin":"","value":""})
    def post(self, request):
        print(request.user)
        target_value=request.data['value']
        coin=request.data['coin']
        alert=Alert.objects.create(
            alert_value=target_value,
            status="created",
            user=request.user,
            coin=coin
        )
        return Response({"Message":"Added"})